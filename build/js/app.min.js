function ease(t,a,n=100,e=100,o=16.67,r=Math.E,l=30){var i=0,c=e,h=function(){t(i),(c=-Math.pow(i/l,r)+e)<o&&(c=o),++i<=n?setTimeout(h,c):a()};setTimeout(h,c)}function setUp(){window.w=canvas.width=window.innerWidth,window.h=canvas.height=window.innerHeight,window.ctx=canvas.getContext("2d");var t=(window.devicePixelRatio||1)/(ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1);canvas.width=w*t,canvas.height=h*t,canvas.style.width=w+"px",canvas.style.height=h+"px",ctx.setTransform(t,0,0,t,0,0)}function rain(t,a){var n="#5CFF5C",e=.045,o="0123456789ｱｲｳｴｵｶｷｸｹｺｻｼｽｾｿﾀﾁﾂﾃﾄﾅﾆﾇﾈﾉﾊﾋﾌﾍﾎﾏﾐﾑﾒﾓﾔﾕﾖﾗﾘﾙﾚﾛﾜｦﾝ",r="14pt Anonymous Pro, monospace";window.fade_speed=34;var l=!1;window.drops=[],window.perma=[],window.finsh=[];var i=14*1.1,c=16.8,f=Math.floor(w/i);(f+t.length)%2==1&&f--;var s=w-f*i;s+=14*(1.1-1);var d=Math.floor(f/2),x=Math.floor(t.length/2),p=d-x,u=d+(t.length-x),v=Math.floor(h/c/2);v*=c;for(var m=0;m<f;m++)drops[m]=-1*Math.floor(Math.random()*(h/c))*c,drops[m]+=.1337,perma[m]=m>=p&&m<u&&" "!=t.charAt(m-p),finsh[m]=!1;function g(){ctx.shadowColor="",ctx.shadowBlur=0}var M=setInterval(function(){var f,d;finsh.every(function(t){return t})&&(clearInterval(M),f=0,d=setInterval(function(){g(),ctx.fillStyle="rgba(0, 0, 0, 0.07)",ctx.fillRect(0,0,w,h),y(),35==++f&&(clearInterval(d),function(){function n(t,a,n){return a>t.length-1?t:t.substr(0,a)+n+t.substr(a+1)}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",r=["5CFF5C","5AF95A","57F257","55EC55","53E653","51DF51","4ED94E","4CD24C","4ACC4A","48C648","45BF45","43B943"];ease(function(a){for(var e=function(t,a){var n=[],e=-1;for(;-1!=(e=t.indexOf(a,e+1));)n.push(e);return n}(perma,!0),l=e.length/2,i=0;i<Math.floor(1+Math.random()*(l-1));i++){var f=Math.floor(Math.random()*e.length);drops[e[f]]+=c,t=n(t,e[f]-p,o.charAt(Math.floor(Math.random()*o.length)))}var f=Math.floor(Math.random()*e.length);a>40/3&&Math.random()>.67&&(perma[e[f]]=!1),ctx.fillStyle="rgba(0, 0, 0, 0.25)",ctx.fillRect(0,0,w,h);var s=Math.round(a/(40/r.length)),d="#"+r[s>=0?s:r.length-1];Math.random()>.67&&(d="#000"),y(d)},function(){!function(t,a,n){var o=(1-e)/t,r=e,l=setInterval(function(){ctx.fillStyle="rgba(0, 0, 0, "+r+")",ctx.fillRect(0,0,w,h),a(),(r+=o)>=1&&(clearInterval(l),ctx.fillStyle="#000",ctx.fillRect(0,0,w,h),n())},fade_speed)}(15,function(){},a)},40,id=25)}())},fade_speed)),g(),ctx.fillStyle="rgba(0, 0, 0, "+e+")",ctx.fillRect(0,0,w,h),ctx.font=r,ctx.fillStyle=n,drops.map(function(a,e){if(perma[e]&&Math.abs(a-v)<1e-4){var r=0;finsh.forEach(function(t){t&&r++}),r>=Math.floor(t.length/2)&&(l=!0),finsh[e]?(g(),ctx.fillStyle="#8F8"):(ctx.shadowColor="#FFF",ctx.shadowOffsetX=0,ctx.shadowOffsetY=0,ctx.shadowBlur=12,ctx.fillStyle="#AFA"),finsh[e]=!0,ctx.fillText(t.charAt(e-p),s/2+e*i,a)}else Math.random()>.97?Math.random()>.67?(ctx.shadowColor="#FFF",ctx.shadowOffsetX=0,ctx.shadowOffsetY=0,ctx.shadowBlur=12,ctx.fillStyle="#AFA"):(g(),ctx.fillStyle="#8F8"):(g(),ctx.fillStyle=n),ctx.fillText(o.charAt(Math.floor(Math.random()*o.length)),s/2+e*i,a),l&&!perma[e]&&a>h&&(drops[e]=-c,finsh[e]=!0),finsh[e]||(a>h+Math.random()*h*2/3?drops[e]=0:drops[e]=a+c)})},30);function y(a=n){ctx.font=r,g(),ctx.fillStyle=a,drops.map(function(a,n){perma[n]&&ctx.fillText(t.charAt(n-p),s/2+n*i,a)})}}function complete_page(){canvas.style.opacity="0",setTimeout(function(){canvas.style.zIndex="-1",canvas.outerHTML=""},1500),wrap.style.zIndex="2",wrap.style.opacity="1",wrap.style.maxHeight="none"}(()=>{setUp();rain("JACK COGDILL // WELCOME",complete_page)})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNoaXJvdXNhZ2kuanMiXSwibmFtZXMiOlsiZWFzZSIsImlmdW4iLCJjYWxsYmFjayIsIm1heCIsImluaXQiLCJtaW5kIiwiZXgiLCJNYXRoIiwiRSIsImRpdiIsImluY3IiLCJkZWxheSIsIndhaXQiLCJwb3ciLCJzZXRUaW1lb3V0Iiwic2V0VXAiLCJ3aW5kb3ciLCJ3IiwiY2FudmFzIiwid2lkdGgiLCJpbm5lcldpZHRoIiwiaCIsImhlaWdodCIsImlubmVySGVpZ2h0IiwiY3R4IiwiZ2V0Q29udGV4dCIsInJhdGlvIiwiZGV2aWNlUGl4ZWxSYXRpbyIsIndlYmtpdEJhY2tpbmdTdG9yZVBpeGVsUmF0aW8iLCJtb3pCYWNraW5nU3RvcmVQaXhlbFJhdGlvIiwibXNCYWNraW5nU3RvcmVQaXhlbFJhdGlvIiwib0JhY2tpbmdTdG9yZVBpeGVsUmF0aW8iLCJiYWNraW5nU3RvcmVQaXhlbFJhdGlvIiwic3R5bGUiLCJzZXRUcmFuc2Zvcm0iLCJyYWluIiwidGV4dCIsIm5vcm1hbCIsIm9wYXF1ZSIsImFscGhhIiwiZm9udCIsImZzaXplIiwiZmFkZV9zcGVlZCIsInN0b3AiLCJkcm9wcyIsInBlcm1hIiwiZmluc2giLCJnbHlwaF93IiwiZ2x5cGhfaCIsInRvdGFsX2Ryb3BzIiwiZmxvb3IiLCJsZW5ndGgiLCJ1bnVzZWQiLCJobWlkZGxlIiwiaGFsZl90IiwibGVmdCIsInJpZ2h0IiwidnNwb3QiLCJpIiwicmFuZG9tIiwiY2hhckF0IiwicmVzZXRfc2hhZG93Iiwic2hhZG93Q29sb3IiLCJzaGFkb3dCbHVyIiwiZmFsbCIsInNldEludGVydmFsIiwiY2xlYW4iLCJldmVyeSIsInYiLCJjbGVhckludGVydmFsIiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJkcmF3X3Blcm1hIiwic2V0Q2hhckF0Iiwic3RyIiwiaW5kZXgiLCJjaHIiLCJzdWJzdHIiLCJhbHBoYV9yZWFsIiwiYmxlbmQiLCJ0cnV0aHMiLCJhcnIiLCJ2YWwiLCJpbmRpY2VzIiwiaW5kZXhPZiIsInB1c2giLCJnZXRBbGxJbmRleGVzIiwiaGlnaCIsImoiLCJyIiwicm91bmQiLCJmaWxsIiwiaXRlciIsImlubmVyIiwic3RlcCIsIm9wYWNpdHkiLCJibGFjayIsImJsYWNrZW4iLCJpZCIsInJlbW92ZV9wZXJtYSIsIm1hcCIsInkiLCJhYnMiLCJzdW0iLCJmb3JFYWNoIiwic2hhZG93T2Zmc2V0WCIsInNoYWRvd09mZnNldFkiLCJmaWxsVGV4dCIsImNvbXBsZXRlX3BhZ2UiLCJ6SW5kZXgiLCJvdXRlckhUTUwiLCJ3cmFwIiwibWF4SGVpZ2h0Il0sIm1hcHBpbmdzIjoiQUFFQSxTQUFBQSxLQUFBQyxFQUFBQyxFQUFBQyxFQUFBLElBQUFDLEVBQUEsSUFBQUMsRUFBQSxNQUFBQyxFQUFBQyxLQUFBQyxFQUFBQyxFQUFBLElBQ0EsSUFBQUMsRUFBQSxFQUNBQyxFQUFBUCxFQUVBUSxFQUFBLFdBQ0FYLEVBQUFTLElBR0FDLEdBQUFKLEtBQUFNLElBQUFILEVBQUFELEVBQUFILEdBQUFGLEdBRUFDLElBQ0FNLEVBQUFOLEtBRUFLLEdBRUFQLEVBQ0FXLFdBQUFGLEVBQUFELEdBR0FULEtBR0FZLFdBQUFGLEVBQUFELEdBR0EsU0FBQUksUUFDQUMsT0FBQUMsRUFBQUMsT0FBQUMsTUFBQUgsT0FBQUksV0FDQUosT0FBQUssRUFBQUgsT0FBQUksT0FBQU4sT0FBQU8sWUFDQVAsT0FBQVEsSUFBQU4sT0FBQU8sV0FBQSxNQUlBLElBU0FDLEdBVEFWLE9BQUFXLGtCQUFBLElBRUFILElBQUFJLDhCQUNBSixJQUFBSywyQkFDQUwsSUFBQU0sMEJBQ0FOLElBQUFPLHlCQUNBUCxJQUFBUSx3QkFDQSxHQUdBZCxPQUFBQyxNQUFBRixFQUFBUyxFQUNBUixPQUFBSSxPQUFBRCxFQUFBSyxFQUNBUixPQUFBZSxNQUFBZCxNQUFBRixFQUFBLEtBQ0FDLE9BQUFlLE1BQUFYLE9BQUFELEVBQUEsS0FDQUcsSUFBQVUsYUFBQVIsRUFBQSxFQUFBLEVBQUFBLEVBQUEsRUFBQSxHQUdBLFNBQUFTLEtBQUFDLEVB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QW9CLEtBREEsMEJBQ0F5RSxnQkFIQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSW5uZXIgZnVuY3Rpb24oaW5jciksIGNhbGxiYWNrIGZ1bmN0aW9uLCBtYXggaW5jcmVtZW50LFxuLy8gaW5pdGlhbCBkZWxheSwgbWluaW11bSBkZWxheSwgZXhwb25lbnQsIGRpdmlzb3JcbmZ1bmN0aW9uIGVhc2UoaWZ1biwgY2FsbGJhY2ssIG1heD0xMDAsIGluaXQ9MTAwLCBtaW5kPTE2LjY3LCBleD1NYXRoLkUsIGRpdj0zMCkge1xuICAgIHZhciBpbmNyICA9IDA7XG4gICAgdmFyIGRlbGF5ID0gaW5pdDtcblxuICAgIHZhciB3YWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmdW4oaW5jcik7XG5cbiAgICAgICAgLy8gZXhpYWwgdGltZSBmdW5jdGlvbjogZ2V0IGZhc3RlciAoZGVsYXkgLT4gMClcbiAgICAgICAgZGVsYXkgPSAtTWF0aC5wb3coaW5jciAvIGRpdiwgZXgpICsgaW5pdDtcblxuICAgICAgICBpZiAoZGVsYXkgPCBtaW5kKSB7XG4gICAgICAgICAgICBkZWxheSA9IG1pbmQ7XG4gICAgICAgIH1cbiAgICAgICAgaW5jcisrO1xuXG4gICAgICAgIGlmIChpbmNyIDw9IG1heCkge1xuICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQod2FpdCwgZGVsYXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQod2FpdCwgZGVsYXkpO1xufVxuXG5mdW5jdGlvbiBzZXRVcCgpIHtcbiAgICB3aW5kb3cudyA9IGNhbnZhcy53aWR0aCAgPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICB3aW5kb3cuaCA9IGNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgd2luZG93LmN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgLy8gTW9kaWZ5IGNhbnZhcyB0byBiZSBoaWdoIERQSVxuICAgIC8vIExvdmluZ2x5IGFkYXB0ZWQgZnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNTY2NjE0My8xMzEzNzU3XG4gICAgdmFyIGRwciA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG4gICAgdmFyIGJzciA9IChcbiAgICAgICAgY3R4LndlYmtpdEJhY2tpbmdTdG9yZVBpeGVsUmF0aW9cbiAgICAgICAgfHwgY3R4Lm1vekJhY2tpbmdTdG9yZVBpeGVsUmF0aW9cbiAgICAgICAgfHwgY3R4Lm1zQmFja2luZ1N0b3JlUGl4ZWxSYXRpb1xuICAgICAgICB8fCBjdHgub0JhY2tpbmdTdG9yZVBpeGVsUmF0aW9cbiAgICAgICAgfHwgY3R4LmJhY2tpbmdTdG9yZVBpeGVsUmF0aW9cbiAgICAgICAgfHwgMVxuICAgICk7XG4gICAgdmFyIHJhdGlvID0gZHByIC8gYnNyO1xuICAgIGNhbnZhcy53aWR0aCAgPSB3ICogcmF0aW87XG4gICAgY2FudmFzLmhlaWdodCA9IGggKiByYXRpbztcbiAgICBjYW52YXMuc3R5bGUud2lkdGggID0gdyArICdweCc7XG4gICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IGggKyAncHgnO1xuICAgIGN0eC5zZXRUcmFuc2Zvcm0ocmF0aW8sIDAsIDAsIHJhdGlvLCAwLCAwKTtcbn1cblxuZnVuY3Rpb24gcmFpbih0ZXh0LCBjYWxsYmFjaykge1xuICAgIHZhciBub3JtYWwgICAgICA9ICcjNUNGRjVDJztcbiAgICB2YXIgYnJpZ2h0ICAgICAgPSAnIzQzQjk0Myc7XG4gICAgdmFyIGJyaWdodGVyICAgID0gJyM4RjgnO1xuICAgIHZhciBicmlnaHRlc3QgICA9ICcjQUZBJztcblxuICAgIHZhciBvcGFxdWUgICAgICA9IDAuMDQ1O1xuXG4gICAgdmFyIGFscGhhICAgICAgID0gJzAxMjM0NTY3ODnvvbHvvbLvvbPvvbTvvbXvvbbvvbfvvbjvvbnvvbrvvbvvvbzvvb3vvb7vvb/vvoDvvoHvvoLvvoPvvoTvvoXvvobvvofvvojvvonvvorvvovvvozvvo3vvo7vvo/vvpDvvpHvvpLvvpPvvpTvvpXvvpbvvpfvvpjvvpnvvprvvpvvvpzvvabvvp0nO1xuICAgIHZhciBoc3BjZSAgICAgICA9IDEuMTsgLy8gSG9yaXpvbnRhbCBzcGFjaW5nIGJldHdlZW4gZ2x5cGhzXG4gICAgdmFyIHZzcGNlICAgICAgID0gMS4yOyAvLyBWZXJ0aWNhbCBzcGFjaW5nIGJldHdlZW4gZ2x5cGhzXG4gICAgdmFyIGZzaXplICAgICAgID0gMTQ7ICAvLyBGb250c2l6ZVxuICAgIHZhciBmb250X2ZhbWlseSA9ICdBbm9ueW1vdXMgUHJvJztcbiAgICB2YXIgZm9udCAgICAgICAgPSBmc2l6ZSArICdwdCAnICsgZm9udF9mYW1pbHkgKyAnLCBtb25vc3BhY2UnO1xuXG4gICAgdmFyIHNwZWVkICAgICAgICAgPSAzMDsgLy8gU3BlZWQgb2YgcmFpbiBpdGVyYXRpb25zIGluIG1pbGxpc2Vjb25kcyAoc21hbGxlciA9IGZhc3RlcilcbiAgICB3aW5kb3cuZmFkZV9zcGVlZCA9IDM0O1xuICAgIHZhciBzdG9wICAgICAgICAgID0gZmFsc2U7XG5cbiAgICB3aW5kb3cuZHJvcHMgPSBbXTsgLy8gQXJyYXkgZm9yIHJhaW5kcm9wc1xuICAgIHdpbmRvdy5wZXJtYSA9IFtdOyAvLyBBcnJheSBvZiBib29sZWFuIHZhbHVlcywgaXMgcmFpbmRyb3AgY29sdW1uIGZvciB0ZXh0XG4gICAgd2luZG93LmZpbnNoID0gW107IC8vIEFycmF5IG9mIGJvb2xlYW4gdmFsdWVzLCBzaWduYWwgaWYgcmFpbmRyb3AgaXMgZG9uZSBwZXJtYW5lbnRseVxuXG4gICAgdmFyIGdseXBoX3cgPSAoZnNpemUgKiBoc3BjZSk7IC8vIFdpZHRoICBvZiBvbmUgZ2x5cGhcbiAgICB2YXIgZ2x5cGhfaCA9IChmc2l6ZSAqIHZzcGNlKTsgLy8gSGVpZ2h0IG9mIG9uZSBnbHlwaFxuICAgIHZhciB0b3RhbF9kcm9wcyA9IE1hdGguZmxvb3IoIHcgLyBnbHlwaF93ICk7IC8vIFRvdGFsIG51bWJlciBvZiByYWluZHJvcHNcblxuICAgIC8vIEJvdGggJ3RvdGFsX2Ryb3BzJyBhbmQgJ3RleHQubGVuZ3RoJyBtdXN0IGJlIGVpdGhlciBldmVuIG9yIG9kZCB0byBlYXNpbHkgY2VudGVyXG4gICAgaWYgKCAodG90YWxfZHJvcHMgKyB0ZXh0Lmxlbmd0aCkgJSAyID09IDEgKSB7XG4gICAgICAgIHRvdGFsX2Ryb3BzLS07XG4gICAgfVxuICAgIHZhciB1bnVzZWQgPSB3IC0gKHRvdGFsX2Ryb3BzICogZ2x5cGhfdyk7IC8vIFVudXNlZCAoaG9yaXpvbnRhbCkgY2FudmFzIHNwYWNlXG4gICAgdW51c2VkICs9IGZzaXplICogKGhzcGNlIC0gMSk7XG4gICAgLy8gVXNpbmcgdGhpcyB0byBjZW50ZXIgdGhlIHRleHQgb24gdGhlIHNjcmVlblxuXG4gICAgdmFyIGhtaWRkbGUgPSBNYXRoLmZsb29yKCB0b3RhbF9kcm9wcyAvIDIgKTsgLy8gSG9yaXpvbnRhbCBtaWRkbGUgb2YgdGhlIHNjcmVlbiAoaW4gZ2x5cGhzKVxuICAgIHZhciBoYWxmX3QgID0gTWF0aC5mbG9vciggdGV4dC5sZW5ndGggLyAyICk7XG4gICAgdmFyIGxlZnQgICAgPSBobWlkZGxlIC0gaGFsZl90OyAgICAgICAgICAgICAgICAgLy8gUmFpbmRyb3AgY29sdW1uIGluZGV4IHRvIHN0YXJ0IHRleHRcbiAgICB2YXIgcmlnaHQgICA9IGhtaWRkbGUgKyAodGV4dC5sZW5ndGggLSBoYWxmX3QpOyAvLyBSYWluZHJvcCBjb2x1bW4gaW5kZXggdG8gZW5kICAgdGV4dFxuXG4gICAgdmFyIHZzcG90ID0gTWF0aC5mbG9vciggaCAvIGdseXBoX2ggLyAyKTtcbiAgICAvLyBWZXJ0aWNhbCBsb2NhdGlvbiBvbiBzY3JlZW4gZm9yIHRleHQgKGluIGdseXBocylcbiAgICAvLyBQdXR0aW5nIGF0IDUwJSBvZiB0aGUgc2NyZWVuJ3MgaGVpZ2h0XG5cbiAgICB2c3BvdCAqPSBnbHlwaF9oOyAvLyBQdXQgaW4geSBjb29yZHNcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG90YWxfZHJvcHM7IGkrKykge1xuICAgICAgICAvLyBTdGFydCByYW5kb21seSBhYm92ZSBzY3JlZW5cbiAgICAgICAgZHJvcHNbaV0gPSAtMSAqIE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiAoaCAvIGdseXBoX2gpICkgKiBnbHlwaF9oO1xuICAgICAgICBkcm9wc1tpXSArPSAwLjEzMzc7IC8vIEFkZCBhbiBvZmZzZXQgc28gaXQgd2lsbCBuZXZlciBhbGlnbiB3aXRoIHRoZSBwZXJtYW5lbnQgbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBmaXJzdCB0aW1lXG4gICAgICAgIHBlcm1hW2ldID0gKGkgPj0gbGVmdCAmJiBpIDwgcmlnaHQpXG4gICAgICAgICAgICAgICAgICAgJiYgKHRleHQuY2hhckF0KGkgLSBsZWZ0KSAhPSAnICcpOyAvLyBTcGFjZXMgYXJlIG5vdCBwZXJtYW5lbnQgbGV0dGVyc1xuICAgICAgICBmaW5zaFtpXSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc2V0X3NoYWRvdygpIHtcbiAgICAgICAgY3R4LnNoYWRvd0NvbG9yID0gJyc7XG4gICAgICAgIGN0eC5zaGFkb3dCbHVyID0gMDtcbiAgICB9XG5cbiAgICB2YXIgZmFsbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vIENoZWNrIGFsbCBib29sZWFuIHZhbHVlcyBpbiBhcnJheVxuICAgICAgICBpZiAoZmluc2guZXZlcnkoZnVuY3Rpb24odil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHY7XG4gICAgICAgIH0pKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGZhbGwpO1xuICAgICAgICAgICAgZmFkZSgpOyAvLyBGdW5jdGlvbiB0byBleGVjdXRlIHdoZW4gZmluaXNoZWRcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc2V0X3NoYWRvdygpO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwgMCwgMCwgJysgb3BhcXVlICsnKSc7XG4gICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCB3LCBoKTtcblxuICAgICAgICBjdHguZm9udCA9IGZvbnQ7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBub3JtYWw7XG5cbiAgICAgICAgZHJvcHMubWFwKGZ1bmN0aW9uKHksIGkpe1xuICAgICAgICAgICAgLy8gW05vIGNoYW5jZSBmb3IgcmFpbmRyb3BzIHRvIGhpdCBpdCBleGFjdGx5IG9uIHRoZSBmaXJzdCByYWluIGJlY2FzdWUgb2ZcbiAgICAgICAgICAgIC8vICB0aGUgYWRkZWQgb2Zmc2V0LiBUaGlzIGFsbG93cyBhIGZldyBzZWNvbmRzIG9mIHJhaW5pbmcgYmVmb3JlIGZvcm1pbmdcbiAgICAgICAgICAgIC8vICB0aGUgdGV4dF1cbiAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgcG9zaXRpb24gZXF1YWxzIHRoZSBwb3NpdGlvbiBvZiB0aGUgcGVybWFuZW50IHRleHQuXG4gICAgICAgICAgICAvLyBJZiBpdCBkb2VzLCBkcmF3IHRoZSBsZXR0ZXJcbiAgICAgICAgICAgIGlmIChwZXJtYVtpXSAmJiBNYXRoLmFicyh5IC0gdnNwb3QpIDwgMC4wMDAxKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7XG4gICAgICAgICAgICAgICAgZmluc2guZm9yRWFjaChmdW5jdGlvbih2KXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1bSsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gU2lnbmFsIHRvIHN0b3AgdGhlIHJhaW5pbmcgaWYgaGFsZiBvZiB0aGUgdGV4dCBoYXMgZm9ybWVkXG4gICAgICAgICAgICAgICAgaWYgKHN1bSA+PSBNYXRoLmZsb29yKCB0ZXh0Lmxlbmd0aCAvIDIgKSkge1xuICAgICAgICAgICAgICAgICAgICBzdG9wID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIWZpbnNoW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5zaGFkb3dDb2xvciA9ICcjRkZGJztcbiAgICAgICAgICAgICAgICAgICAgY3R4LnNoYWRvd09mZnNldFggPSAwO1xuICAgICAgICAgICAgICAgICAgICBjdHguc2hhZG93T2Zmc2V0WSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5zaGFkb3dCbHVyID0gMTI7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBicmlnaHRlc3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNldF9zaGFkb3coKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGJyaWdodGVyO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZpbnNoW2ldID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5jaGFyQXQoaSAtIGxlZnQpLCAgICAvLyBHbHlwaFxuICAgICAgICAgICAgICAgICAgICB1bnVzZWQgLyAyICsgaSAqIGdseXBoX3csIC8vIHggY29vcmRcbiAgICAgICAgICAgICAgICAgICAgeSAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGNvb3JkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFkZCByYW5kb20gZ2xvd2luZyBnbHlwaHNcbiAgICAgICAgICAgICAgICAvLyAofjMlIGNoYW5jZSlcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuOTcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gMS8zIGdsb3dpbmcgd2hpdGUgZ2x5cGhzICh3aGl0ZSBzaGFkb3cpXG4gICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC42Nykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNoYWRvd0NvbG9yID0gJyNGRkYnO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNoYWRvd09mZnNldFggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNoYWRvd09mZnNldFkgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSAxMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBicmlnaHRlc3Q7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gMi8zIG1vcmUgc3VidGxlLCBzbGlnaHRseSBicmlnaHRlciBnbHlwaHMgdGhhdCBnbG93IGZvciBhIG1vbWVudFxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0X3NoYWRvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGJyaWdodGVyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNldF9zaGFkb3coKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG5vcm1hbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBQcmludCBsZXR0ZXJzXG4gICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KFxuICAgICAgICAgICAgICAgICAgICBhbHBoYS5jaGFyQXQoIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFscGhhLmxlbmd0aCkgKSwgLy8gR2x5cGhcbiAgICAgICAgICAgICAgICAgICAgdW51c2VkIC8gMiArIGkgKiBnbHlwaF93LCAvLyB4IGNvb3JkXG4gICAgICAgICAgICAgICAgICAgIHkgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBjb29yZFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBzaWduYWxsZWQgdG8gc3RvcCByYWluaW5nXG4gICAgICAgICAgICAgICAgaWYgKHN0b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgcmFpbmRyb3AgZm9yZXZlciBpZiBpdCBpcyBub3QgYSBwZXJtYW5lbnQgbGV0dGVyIGNvbHVtbiBhbmRcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBwYXN0IHRoZSBib3R0b20gb2YgdGhlIHNjcmVlblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXBlcm1hW2ldICYmIHkgPiBoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wc1tpXSA9IC1nbHlwaF9oO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluc2hbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFmaW5zaFtpXSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCBpZiByYWluZHJvcCBpcyBzb21lIGRpc3RhbmNlIHBhc3QgYm90dG9tIG9mIHNjcmVlblxuICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGggKyBNYXRoLnJhbmRvbSgpICogaCAqIDIgLyAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wc1tpXSA9IDA7IC8vIFJlc2V0IHJhaW5kcm9wcyBhdCB0b3Agb2Ygc2NyZWVuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wc1tpXSA9IHkgKyBnbHlwaF9oOyAvLyBBZHZhbmNlIGRvd24gdGhlIHNjcmVlblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LCBzcGVlZCk7XG5cbiAgICAvLyBSZWRyYXcgdGhlIHRleHQgY2hhcmFjdGVycyAoa2VlcCB0aGVtIHBlcm1hbmVudClcbiAgICBmdW5jdGlvbiBkcmF3X3Blcm1hKGZpbGw9bm9ybWFsKSB7XG4gICAgICAgIGN0eC5mb250ID0gZm9udDtcbiAgICAgICAgcmVzZXRfc2hhZG93KCk7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBmaWxsO1xuXG4gICAgICAgIGRyb3BzLm1hcChmdW5jdGlvbih5LCBpKXtcbiAgICAgICAgICAgIGlmIChwZXJtYVtpXSkge1xuICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5jaGFyQXQoaSAtIGxlZnQpLCAgICAvLyBHbHlwaFxuICAgICAgICAgICAgICAgICAgICB1bnVzZWQgLyAyICsgaSAqIGdseXBoX3csIC8vIHggY29vcmRcbiAgICAgICAgICAgICAgICAgICAgeSAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGNvb3JkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmFkZSgpIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB2YXIgY2xlYW4gPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmVzZXRfc2hhZG93KCk7XG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwgMCwgMCwgMC4wNyknO1xuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIHcsIGgpO1xuICAgICAgICAgICAgZHJhd19wZXJtYSgpO1xuXG4gICAgICAgICAgICAvLyAyNSBpcyBhYm91dCB0aGUgbnVtYmVyIGl0IHRha2VzIHRvIGdvIGNvbXBsZXRlbHkgYmxhY2tcbiAgICAgICAgICAgIC8vIEV4dHJhIHRvIHN0YWxsIHNvIHVzZXIgY2FuIHJlYWQgdGV4dFxuICAgICAgICAgICAgaWYgKCsraSA9PSAzNSkge1xuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoY2xlYW4pO1xuICAgICAgICAgICAgICAgIHJlbW92ZV9wZXJtYSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBmYWRlX3NwZWVkKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVfcGVybWEoKSB7XG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbEluZGV4ZXMoYXJyLCB2YWwpIHtcbiAgICAgICAgICAgIHZhciBpbmRpY2VzID0gW107XG4gICAgICAgICAgICB2YXIgaSA9IC0xO1xuICAgICAgICAgICAgd2hpbGUgKCAoaSA9IGFyci5pbmRleE9mKHZhbCwgaSArIDEpKSAhPSAtMSApe1xuICAgICAgICAgICAgICAgIGluZGljZXMucHVzaChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmRpY2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0Q2hhckF0KHN0ciwgaW5kZXgsIGNocikge1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gc3RyLmxlbmd0aCAtIDEpIHJldHVybiBzdHI7XG4gICAgICAgICAgICByZXR1cm4gc3RyLnN1YnN0cigwLGluZGV4KSArIGNociArIHN0ci5zdWJzdHIoaW5kZXggKyAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhbHBoYV9yZWFsID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMDEyMzQ1Njc4OSc7XG4gICAgICAgIHZhciBibGVuZCA9IFtcbiAgICAgICAgICAgICc1Q0ZGNUMnLCAnNUFGOTVBJywgJzU3RjI1NycsICc1NUVDNTUnLCAnNTNFNjUzJywgJzUxREY1MScsXG4gICAgICAgICAgICAnNEVEOTRFJywgJzRDRDI0QycsICc0QUNDNEEnLCAnNDhDNjQ4JywgJzQ1QkY0NScsICc0M0I5NDMnXG4gICAgICAgIF07XG4gICAgICAgIC8vIEJsZW5kZWQgbm9ybWFsIC0+IGJyaWdodFxuICAgICAgICAvLyBDb3VydGVzeSBvZjogaHR0cDovL21leWVyd2ViLmNvbS9lcmljL3Rvb2xzL2NvbG9yLWJsZW5kLyM1Q0ZGNUM6NDNCOTQzOjEwOmhleFxuXG4gICAgICAgIHZhciBtYXggPSA0MDtcbiAgICAgICAgZWFzZShcbiAgICAgICAgICAgIC8vIElubmVyIGZ1bmN0aW9uKGluY3IpXG4gICAgICAgICAgICBmdW5jdGlvbihpKXtcbiAgICAgICAgICAgICAgICB2YXIgdHJ1dGhzID0gZ2V0QWxsSW5kZXhlcyhwZXJtYSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbG93ICA9IDE7XG4gICAgICAgICAgICAgICAgdmFyIGhpZ2ggPSB0cnV0aHMubGVuZ3RoIC8gMjtcbiAgICAgICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICAgICAgICB2YXIgaiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGogPCBNYXRoLmZsb29yKGxvdyArIE1hdGgucmFuZG9tKCkgKiAoaGlnaCAtIGxvdykpO1xuICAgICAgICAgICAgICAgICAgICBqKytcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0cnV0aHMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgZHJvcHNbIHRydXRoc1tyXSBdICs9IGdseXBoX2g7XG4gICAgICAgICAgICAgICAgICAgIHRleHQgPSBzZXRDaGFyQXQoXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ1dGhzW3JdIC0gbGVmdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhX3JlYWwuY2hhckF0KCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhbHBoYV9yZWFsLmxlbmd0aCkgKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdHJ1dGhzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgLy8gMzMlIGNoYW5jZSwgb25seSBpZiAxLzMgb2YgYW5pbWF0aW9uIGRvbmVcbiAgICAgICAgICAgICAgICBpZiAoaSA+IG1heCAvIDMgJiYgTWF0aC5yYW5kb20oKSA+IDAuNjcpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVybWFbIHRydXRoc1tyXSBdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsIDAsIDAsIDAuMjUpJztcbiAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgdywgaCk7XG5cbiAgICAgICAgICAgICAgICAvLyBCbGVuZDogbm9ybWFsIC0+IGJyaWdodFxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IE1hdGgucm91bmQoaSAvIChtYXggLyBibGVuZC5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICB2YXIgZmlsbCA9ICcjJyArIGJsZW5kWyAoaW5kZXggPj0gMCkgPyBpbmRleCA6IGJsZW5kLmxlbmd0aCAtIDEgXTtcblxuICAgICAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC42NykgeyAvLyAzMyUgY2hhbmNlXG4gICAgICAgICAgICAgICAgICAgIGZpbGwgPSAnIzAwMCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRyYXdfcGVybWEoZmlsbCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gQ2FsbGJhY2sgZnVuY3Rpb25cbiAgICAgICAgICAgIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgYmxhY2tlbigxNSwgZnVuY3Rpb24oKXt9LCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWF4LCAvLyBNYXggaW5jcmVtZW50XG4gICAgICAgICAgICBpZD0yNSAvLyBJbml0aWFsIGRlbGF5XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gSXRlcmF0aW9ucywgaW5uZXIgZnVuY3Rpb24sIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAgZnVuY3Rpb24gYmxhY2tlbihpdGVyLCBpbm5lciwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHN0ZXAgPSAoMSAtIG9wYXF1ZSkgLyBpdGVyO1xuICAgICAgICB2YXIgb3BhY2l0eSA9IG9wYXF1ZTtcbiAgICAgICAgdmFyIGJsYWNrID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLCAwLCAwLCAnKyBvcGFjaXR5ICsnKSc7XG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgdywgaCk7XG5cbiAgICAgICAgICAgIGlubmVyKCk7XG5cbiAgICAgICAgICAgIG9wYWNpdHkgKz0gc3RlcDtcbiAgICAgICAgICAgIGlmIChvcGFjaXR5ID49IDEpIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGJsYWNrKTtcblxuICAgICAgICAgICAgICAgIC8vIEZpbmFsIGl0ZXJhdGlvbiAocHVyZSBibGFjaylcbiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCB3LCBoKTtcblxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7IC8vIERvbmUgd2l0aCBibGFjaygpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGZhZGVfc3BlZWQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY29tcGxldGVfcGFnZSgpIHtcbiAgICBjYW52YXMuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIGNhbnZhcy5zdHlsZS56SW5kZXggPSAnLTEnO1xuICAgICAgICBjYW52YXMub3V0ZXJIVE1MID0gJyc7IC8vIFJlbW92ZSB0aGUgZWxlbWVudCBmcm9tIHRoZSBkb2N1bWVudFxuICAgIH0sIDE1MDApO1xuXG4gICAgd3JhcC5zdHlsZS56SW5kZXggID0gJzInO1xuICAgIHdyYXAuc3R5bGUub3BhY2l0eSA9ICcxJztcblxuICAgIC8vIEFsbG93IHRoZSB3cmFwIHRvIGJlIGRlZmF1bHQgaGVpZ2h0IGFnYWluXG4gICAgd3JhcC5zdHlsZS5tYXhIZWlnaHQgPSAnbm9uZSc7XG59XG5cbigoKSA9PiB7XG4gICAgc2V0VXAoKTtcbiAgICBjb25zdCB0ZXh0ID0gJ0pBQ0sgQ09HRElMTCAvLyBXRUxDT01FJztcbiAgICByYWluKHRleHQsIGNvbXBsZXRlX3BhZ2UpO1xufSkoKTtcbiJdfQ==
